/* Google Reviews Plugin - Frontend Styles */

.grp-reviews {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    line-height: 1.6;
}

.grp-review {
    position: relative;
    margin-bottom: 15px;
    background: #fff;
    border: 1px solid #e0e0e0;
    border-radius: 8px;
    padding: 16px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.grp-review:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
}

.grp-review-rating {
    margin-bottom: 12px;
}

.grp-star {
    display: inline-block;
    color: #ffc107;
    font-size: 18px;
    margin-right: 2px;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}

.grp-star-full {
    color: #ffc107;
}

.grp-star-half {
    color: #ffc107;
    opacity: 0.7;
}

.grp-star-empty {
    color: #ddd;
}

.grp-review-text {
    color: #333;
    font-size: 14px;
    line-height: 1.5;
    margin-bottom: 12px;
}

.grp-review-meta {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-top: 8px;
}

/* Flex alignment based on text-align for meta and rating containers */
.grp-review-meta[style*="text-align: left"],
.elementor-widget-grp-reviews[class*="text-align-left"] .grp-review-meta {
    justify-content: flex-start;
}

.grp-review-meta[style*="text-align: center"],
.elementor-widget-grp-reviews[class*="text-align-center"] .grp-review-meta {
    justify-content: center;
}

.grp-review-meta[style*="text-align: right"],
.elementor-widget-grp-reviews[class*="text-align-right"] .grp-review-meta {
    justify-content: flex-end;
}

.grp-review-rating {
    display: flex;
    gap: 2px;
}

/* Support both Elementor class selectors and inline styles for text alignment */
.elementor-widget-grp-reviews[class*="text-align-left"] .grp-review-rating,
.grp-review-rating[style*="text-align: left"],
.grp-review[style*="text-align: left"] .grp-review-rating,
.elementor-widget-grp-reviews[style*="text-align: left"] .grp-review-rating {
    justify-content: flex-start;
}

.elementor-widget-grp-reviews[class*="text-align-center"] .grp-review-rating,
.grp-review-rating[style*="text-align: center"],
.grp-review[style*="text-align: center"] .grp-review-rating,
.elementor-widget-grp-reviews[style*="text-align: center"] .grp-review-rating {
    justify-content: center;
}

.elementor-widget-grp-reviews[class*="text-align-right"] .grp-review-rating,
.grp-review-rating[style*="text-align: right"],
.grp-review[style*="text-align: right"] .grp-review-rating,
.elementor-widget-grp-reviews[style*="text-align: right"] .grp-review-rating {
    justify-content: flex-end;
}

.grp-review-avatar {
    display: inline-block;
    flex-shrink: 0;
}

.grp-review-avatar img {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    object-fit: cover;
    border: 2px solid #f0f0f0;
}

/* Avatar alignment based on text-align */
.elementor-widget-grp-reviews[class*="text-align-center"] .grp-review-avatar {
    margin: 0 auto;
}

.elementor-widget-grp-reviews[class*="text-align-right"] .grp-review-avatar {
    margin-left: auto;
}

.grp-author-name {
    font-weight: 600;
    color: #333;
    font-size: 13px;
}

.grp-review-date {
    color: #666;
    font-size: 12px;
    margin-left: 10px;
}

.grp-review-reply {
    margin-top: 15px;
    padding: 15px;
    background: #f8f9fa;
    border-radius: 8px;
    border-left: 4px solid #007cba;
}

.grp-reply-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
    font-weight: 600;
    color: #333;
}

.grp-reply-text {
    color: #666;
    font-size: 14px;
}

.grp-no-reviews {
    text-align: center;
    padding: 40px 20px;
    color: #666;
    background: #f9f9f9;
    border-radius: 8px;
    border: 2px dashed #ddd;
}

/* Carousel Styles */
.grp-layout-carousel .grp-carousel-container {
    position: relative;
    overflow: hidden;
    border-radius: 8px;
    max-width: 1200px; /* Constrain max width */
    margin: 0 auto; /* Center the carousel */
    display: flex;
    justify-content: center;
    align-items: center;
}

.grp-layout-carousel .grp-carousel-wrapper {
    display: flex;
    transition: transform 0.5s ease;
    align-items: stretch;
    justify-content: center;
    width: 100%;
}

.grp-layout-carousel .grp-review-item {
    box-sizing: border-box;
    padding: 0 20px;
}

.grp-layout-carousel .grp-review {
    max-width: 600px; /* Constrain individual card width */
    margin: 0 auto;
}

.grp-layout-carousel .grp-carousel-prev,
.grp-layout-carousel .grp-carousel-next {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    background: rgba(0, 0, 0, 0.4);
    color: white;
    border: none;
    width: 40px;
    height: 40px;
    min-width: 40px;
    min-height: 40px;
    max-width: 40px;
    max-height: 40px;
    aspect-ratio: 1 / 1;
    border-radius: 50%;
    cursor: pointer;
    z-index: 10;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
    font-size: 16px;
    box-sizing: border-box;
    flex-shrink: 0;
    padding: 0;
    overflow: hidden;
}

.grp-layout-carousel .grp-carousel-prev .grp-arrow-left,
.grp-layout-carousel .grp-carousel-prev .grp-arrow-right,
.grp-layout-carousel .grp-carousel-next .grp-arrow-left,
.grp-layout-carousel .grp-carousel-next .grp-arrow-right {
    display: flex;
    align-items: center;
    justify-content: center;
    line-height: 1;
    width: 100%;
    height: 100%;
}

.grp-layout-carousel .grp-carousel-prev i,
.grp-layout-carousel .grp-carousel-next i {
    display: flex;
    align-items: center;
    justify-content: center;
    line-height: 1;
}

.grp-layout-carousel .grp-carousel-prev:hover,
.grp-layout-carousel .grp-carousel-next:hover {
    background: rgba(0, 0, 0, 0.6);
    transform: translateY(-50%) scale(1.1);
}

.grp-layout-carousel .grp-carousel-prev {
    left: 10px;
}

.grp-layout-carousel .grp-carousel-next {
    right: 10px;
}

.grp-layout-carousel .grp-carousel-dots {
    display: flex;
    justify-content: center;
    gap: 8px;
    margin-top: 20px;
}

.grp-layout-carousel .grp-dot {
    width: 12px;
    height: 12px;
    min-width: 12px;
    min-height: 12px;
    max-width: 12px;
    max-height: 12px;
    aspect-ratio: 1 / 1;
    border-radius: 50%;
    border: none;
    background: #ccc;
    cursor: pointer;
    transition: background 0.3s ease;
    flex-shrink: 0;
    box-sizing: border-box;
    padding: 0;
    overflow: hidden;
}

.grp-layout-carousel .grp-dot.active {
    background: #007cba;
}

.grp-layout-carousel .grp-dot:hover {
    background: #999;
}

/* List Layout */
.grp-layout-list .grp-reviews-list {
    display: flex;
    flex-direction: column;
    gap: 20px;
}

/* Grid Layout */
.grp-layout-grid .grp-reviews-grid {
    display: grid;
    grid-template-columns: repeat(var(--grp-cols-desktop, 3), 1fr);
    gap: var(--grp-gap, 20px);
}

@media (max-width: 1024px) {
    .grp-layout-grid .grp-reviews-grid {
        grid-template-columns: repeat(var(--grp-cols-tablet, 2), 1fr);
    }
}

@media (max-width: 640px) {
    .grp-layout-grid .grp-reviews-grid {
        grid-template-columns: repeat(var(--grp-cols-mobile, 1), 1fr);
    }
}

/* Grid Carousel */
.grp-layout-grid_carousel .grp-grid-carousel-viewport {
    overflow: hidden;
    position: relative;
}

.grp-layout-grid_carousel .grp-grid-carousel-track {
    display: flex;
    transition: transform 0.5s ease;
    gap: var(--grp-gap, 20px);
}

.grp-layout-grid_carousel .grp-review-item {
    box-sizing: border-box;
    flex: 0 0 calc((100% - var(--grp-gap, 20px) * (var(--grp-cols-desktop, 3) - 1)) / var(--grp-cols-desktop, 3));
    min-width: 0; /* Prevent flex item from overflowing */
}

@media (max-width: 1024px) {
    .grp-layout-grid_carousel .grp-review-item {
        flex: 0 0 calc((100% - var(--grp-gap, 20px) * (var(--grp-cols-tablet, 2) - 1)) / var(--grp-cols-tablet, 2));
    }
}

@media (max-width: 640px) {
    .grp-layout-grid_carousel .grp-review-item {
        flex: 0 0 calc((100% - var(--grp-gap, 20px) * (var(--grp-cols-mobile, 1) - 1)) / var(--grp-cols-mobile, 1));
    }
}

/* Grid Carousel Controls */
.grp-layout-grid_carousel .grp-carousel-prev,
.grp-layout-grid_carousel .grp-carousel-next {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    background: rgba(0, 0, 0, 0.4);
    color: white;
    border: none;
    width: 32px;
    height: 32px;
    min-width: 32px;
    min-height: 32px;
    max-width: 32px;
    max-height: 32px;
    aspect-ratio: 1 / 1;
    border-radius: 50%;
    cursor: pointer;
    z-index: 10;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background 0.3s ease;
    font-size: 14px;
    padding: 0;
    box-sizing: border-box;
    flex-shrink: 0;
    overflow: hidden;
}

.grp-layout-grid_carousel .grp-carousel-prev .grp-arrow-left,
.grp-layout-grid_carousel .grp-carousel-prev .grp-arrow-right,
.grp-layout-grid_carousel .grp-carousel-next .grp-arrow-left,
.grp-layout-grid_carousel .grp-carousel-next .grp-arrow-right {
    display: flex;
    align-items: center;
    justify-content: center;
    line-height: 1;
    width: 100%;
    height: 100%;
}

.grp-layout-grid_carousel .grp-carousel-prev i,
.grp-layout-grid_carousel .grp-carousel-next i {
    display: flex;
    align-items: center;
    justify-content: center;
    line-height: 1;
}

.grp-layout-grid_carousel .grp-carousel-prev:hover,
.grp-layout-grid_carousel .grp-carousel-next:hover {
    background: rgba(0, 0, 0, 0.6);
}

.grp-layout-grid_carousel .grp-carousel-prev {
    left: -16px;
}

.grp-layout-grid_carousel .grp-carousel-next {
    right: -16px;
}

.grp-layout-grid_carousel .grp-carousel-dots {
    display: flex !important;
    justify-content: center;
    gap: 8px;
    margin-top: 20px;
    padding: 10px 0;
    visibility: visible !important;
    opacity: 1 !important;
    min-height: 32px;
    width: 100%;
    clear: both;
    position: relative;
    z-index: 10;
}

.grp-layout-grid_carousel .grp-dot {
    width: 12px;
    height: 12px;
    min-width: 12px;
    min-height: 12px;
    max-width: 12px;
    max-height: 12px;
    aspect-ratio: 1 / 1;
    border-radius: 50%;
    border: none;
    background: #ccc;
    cursor: pointer;
    transition: background 0.3s ease;
    flex-shrink: 0;
    box-sizing: border-box;
    padding: 0;
    overflow: hidden;
}

.grp-layout-grid_carousel .grp-dot.active {
    background: #007cba;
}

.grp-layout-grid_carousel .grp-dot:hover {
    background: #999;
}

/* Consistent Height */
.grp-consistent-height .grp-review {
    display: flex;
    flex-direction: column;
    height: 100%;
}

.grp-consistent-height .grp-review-text {
    flex: 1;
    display: flex;
    flex-direction: column;
}

.grp-consistent-height .grp-review-text p {
    flex: 1;
    margin: 0;
}

/* Ensure minimum height for consistency */
.grp-consistent-height .grp-review {
    min-height: 200px;
}

/* Box Shadow Spacing - Applied to parent container for proper visibility */
.grp-review-item {
    /* Add padding when box shadow is present to ensure visibility */
    transition: padding 0.3s ease;
}

/* Dynamic padding based on box shadow values on child elements */
.grp-review-item:has(.grp-review[style*="box-shadow"]) {
    padding: 30px !important;
}

.grp-review-item:has(.grp-review[style*="box-shadow"]) .grp-review {
    margin: -30px !important;
}

/* Even more padding for large blur/spread values */
.grp-review-item:has(.grp-review[style*="blur(20px)"]) {
    padding: 40px !important;
}

.grp-review-item:has(.grp-review[style*="blur(20px)"]) .grp-review {
    margin: -40px !important;
}

.grp-review-item:has(.grp-review[style*="blur(30px)"]) {
    padding: 50px !important;
}

.grp-review-item:has(.grp-review[style*="blur(30px)"]) .grp-review {
    margin: -50px !important;
}

.grp-review-item:has(.grp-review[style*="spread(20px)"]) {
    padding: 45px !important;
}

.grp-review-item:has(.grp-review[style*="spread(20px)"]) .grp-review {
    margin: -45px !important;
}

.grp-review-item:has(.grp-review[style*="spread(30px)"]) {
    padding: 60px !important;
}

.grp-review-item:has(.grp-review[style*="spread(30px)"]) .grp-review {
    margin: -60px !important;
}

/* Fallback for browsers without :has() support */
.grp-review[style*="box-shadow"] {
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1) !important;
    margin: 20px !important;
}

/* Specific adjustments for different layouts */
.grp-layout-carousel .grp-review-item {
    padding: 0 10px;
}

/* Ensure containers don't clip shadows */
.grp-layout-carousel .grp-carousel-container,
.grp-layout-grid .grp-reviews-grid,
.grp-layout-grid_carousel .grp-grid-carousel-viewport,
.grp-layout-list .grp-reviews-list {
    overflow: visible !important;
}

.grp-layout-grid .grp-review-item,
.grp-layout-grid_carousel .grp-review-item {
    /* Grid items already have gaps, reduce additional margin */
}

.grp-layout-grid .grp-review-item:has(.grp-review[style*="box-shadow"]),
.grp-layout-grid_carousel .grp-review-item:has(.grp-review[style*="box-shadow"]) {
    padding: 15px !important;
}

.grp-layout-grid .grp-review-item:has(.grp-review[style*="box-shadow"]) .grp-review,
.grp-layout-grid_carousel .grp-review-item:has(.grp-review[style*="box-shadow"]) .grp-review {
    margin: -15px !important;
}

.grp-layout-grid .grp-review-item:has(.grp-review[style*="blur(20px)"]),
.grp-layout-grid_carousel .grp-review-item:has(.grp-review[style*="blur(20px)"]) {
    padding: 25px !important;
}

.grp-layout-grid .grp-review-item:has(.grp-review[style*="blur(20px)"]) .grp-review,
.grp-layout-grid_carousel .grp-review-item:has(.grp-review[style*="blur(20px)"]) .grp-review {
    margin: -25px !important;
}

.grp-layout-grid .grp-review-item:has(.grp-review[style*="blur(30px)"]),
.grp-layout-grid_carousel .grp-review-item:has(.grp-review[style*="blur(30px)"]) {
    padding: 35px !important;
}

.grp-layout-grid .grp-review-item:has(.grp-review[style*="blur(30px)"]) .grp-review,
.grp-layout-grid_carousel .grp-review-item:has(.grp-review[style*="blur(30px)"]) .grp-review {
    margin: -35px !important;
}

/* Creative style background properties - supports Elementor gradients */
.grp-style-creative .grp-review {
    /* Ensure proper background rendering for gradients */
    background-attachment: initial;
    background-clip: initial;
    background-origin: initial;
    background-repeat: no-repeat;
    background-size: cover;
    min-height: 150px; /* Ensure cards have height for gradient visibility */
}

/* Responsive Design */
.grp-responsive .grp-review {
    margin-bottom: 15px;
    padding: 15px;
}

.grp-responsive .grp-review-text {
    font-size: 14px;
}

.grp-responsive .grp-review-meta {
    flex-direction: column;
    align-items: flex-start;
    gap: 8px;
}

.grp-responsive .grp-review-avatar img {
    width: 35px;
    height: 35px;
}

@media (max-width: 768px) {
    .grp-layout-carousel .grp-carousel-prev,
    .grp-layout-carousel .grp-carousel-next {
        width: 35px;
        height: 35px;
        font-size: 16px;
    }
    
    .grp-layout-carousel .grp-carousel-prev {
        left: 5px;
    }
    
    .grp-layout-carousel .grp-carousel-next {
        right: 5px;
    }
    
    .grp-review {
        padding: 15px;
    }
    
    .grp-review-text {
        font-size: 14px;
    }
}

/* Widget Styles */
.grp-widget-content .grp-review {
    margin-bottom: 15px;
}

.grp-widget-content .grp-review:last-child {
    margin-bottom: 0;
}

/* Elementor Widget Styles */
.grp-elementor-widget .grp-review {
    margin-bottom: 20px;
}

/* Gutenberg Block Styles */
.grp-gutenberg-block .grp-review {
    margin-bottom: 20px;
}

/* Loading State */
.grp-loading {
    text-align: center;
    padding: 40px 20px;
    color: #666;
}

.grp-loading::after {
    content: '';
    display: inline-block;
    width: 20px;
    height: 20px;
    border: 2px solid #f3f3f3;
    border-top: 2px solid #007cba;
    border-radius: 50%;
    animation: grp-spin 1s linear infinite;
    margin-left: 10px;
}

@keyframes grp-spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* Error State */
.grp-error {
    text-align: center;
    padding: 40px 20px;
    color: #dc3232;
    background: #fef7f7;
    border: 1px solid #f5c6cb;
    border-radius: 8px;
}

/* Accessibility */
.grp-carousel-prev:focus,
.grp-carousel-next:focus,
.grp-dot:focus {
    outline: 2px solid #007cba;
    outline-offset: 2px;
}

/* Print Styles */
@media print {
    .grp-layout-carousel .grp-carousel-prev,
    .grp-layout-carousel .grp-carousel-next,
    .grp-layout-carousel .grp-carousel-dots {
        display: none;
    }
    
    .grp-layout-carousel .grp-carousel-wrapper {
        display: block;
    }
    
    .grp-layout-carousel .grp-review-item {
        flex: none;
        padding: 0;
        margin-bottom: 20px;
    }
}

/* Theme Styles */
.grp-theme-dark .grp-review {
    background: #2d2d2d;
    color: #f0f0f0;
    border-color: #444;
}

.grp-theme-dark .grp-review-text {
    color: #e0e0e0;
}

.grp-theme-dark .grp-author-name {
    color: #ffffff;
}

.grp-theme-dark .grp-review-date {
    color: #999;
}

.grp-theme-dark .grp-star-empty {
    color: #555;
}

.grp-theme-light .grp-review {
    background: #ffffff;
    color: #333;
}

/* List Layout Alignment Fixes */
.grp-layout-list .grp-review-meta {
    display: flex;
    align-items: center;
    gap: 10px;
}

/* List layout - ensure text alignment applies to arrows when text only selected */
.grp-layout-list .grp-review-rating[style*="text-align: center"],
.elementor-widget-grp-reviews[class*="text-align-center"] .grp-layout-list .grp-review-rating {
    justify-content: center;
}

.grp-layout-list .grp-review-rating[style*="text-align: right"],
.elementor-widget-grp-reviews[class*="text-align-right"] .grp-layout-list .grp-review-rating {
    justify-content: flex-end;
}

.grp-layout-list .grp-review-meta[style*="text-align: center"],
.elementor-widget-grp-reviews[class*="text-align-center"] .grp-layout-list .grp-review-meta {
    justify-content: center;
}

.grp-layout-list .grp-review-meta[style*="text-align: right"],
.elementor-widget-grp-reviews[class*="text-align-right"] .grp-layout-list .grp-review-meta {
    justify-content: flex-end;
}

/* Glass Effect (non-creative styles) */
.grp-review.grp-glass-effect {
    background: rgba(255, 255, 255, 0.25) !important;
    border: 1px solid rgba(255, 255, 255, 0.3) !important;
    backdrop-filter: blur(20px) !important;
    -webkit-backdrop-filter: blur(20px) !important;
}

.grp-theme-dark .grp-review.grp-glass-effect {
    background: rgba(45, 45, 45, 0.5) !important;
    border: 1px solid rgba(255, 255, 255, 0.1) !important;
}

/* Grid Carousel - ensure arrows/dots are visible */
.grp-layout-grid_carousel {
    position: relative;
}

.grp-layout-grid_carousel .grp-grid-carousel-viewport {
    margin: 0 40px;
}

/* Fix carousel columns to use CSS variables properly - override default at media query level */
.grp-layout-carousel .grp-review-item {
    flex: 0 0 calc((100% - var(--grp-gap, 20px) * (var(--grp-cols-desktop, 3) - 1)) / var(--grp-cols-desktop, 3));
    max-width: calc((100% - var(--grp-gap, 20px) * (var(--grp-cols-desktop, 3) - 1)) / var(--grp-cols-desktop, 3));
}

@media (max-width: 1024px) {
    .grp-layout-carousel .grp-review-item {
        flex: 0 0 calc((100% - var(--grp-gap, 20px) * (var(--grp-cols-tablet, 2) - 1)) / var(--grp-cols-tablet, 2)) !important;
        max-width: calc((100% - var(--grp-gap, 20px) * (var(--grp-cols-tablet, 2) - 1)) / var(--grp-cols-tablet, 2)) !important;
    }
}

@media (max-width: 640px) {
    .grp-layout-carousel .grp-review-item {
        flex: 0 0 calc((100% - var(--grp-gap, 20px) * (var(--grp-cols-mobile, 1) - 1)) / var(--grp-cols-mobile, 1)) !important;
        max-width: calc((100% - var(--grp-gap, 20px) * (var(--grp-cols-mobile, 1) - 1)) / var(--grp-cols-mobile, 1)) !important;
    }
}